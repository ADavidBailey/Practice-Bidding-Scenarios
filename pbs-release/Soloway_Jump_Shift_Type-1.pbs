Script,SolowayJumpShiftType1
window.currentPBSScenario = 'SolowayJumpShiftType1';
window.currentPBSScenarioFilename = 'Soloway_Jump_Shift_Type-1';
console.log('PBS: Logging scenario selection for SolowayJumpShiftType1');
fetch('https://bba.harmonicsystems.com/api/scenario/select', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-Client-Version': '1.0.0'
    },
    body: JSON.stringify({
        scenario: 'SolowayJumpShiftType1',
        user: whoAmI() || 'anonymous'
    })
}).then(function(r){ console.log('PBS: Server response', r.status); }).catch(function(e){ console.log('PBS: Fetch error', e); });
setDealerCode(`

/*
convention-card: 21GF-SolowayJumpShift
auction-filter: Note....Soloway Jump Shift
*/
# Calculate Total Points for North (tp) for North
v1 = shape(north, any 0xxx) ? 5 : 0
s1 = shape(north, any 1xxx) ? 3 : 0
d1 = shape(north, any 2xxx) ? 1 : 0 // allow for 3 doubletons
d2 = shape(north, any 22xx) ? 1 : 0
d3 = shape(north, any 222x) ? 1 : 0
tp = v1+s1+d1+d2+d3 + hcp(north)

# Define openers
sOpener = spades(south) >= hearts(south) and spades(south) >=5 and spades(south) >= diamonds(south) and spades(south) >= clubs(south)
hOpener = not sOpener and hearts(south) >=5 and hearts(south) >= diamonds(south) and hearts(south) >= clubs(south)
MOpener = sOpener or hOpener
mOpener = not (sOpener or hOpener)
dOpener = mOpener and (diamonds(south) >= clubs(south) or shape(south, xx32))
cOpener = mOpener and not dOpener


# Define strong rebiddable suit
Gs = spades(north)>5 and top5(north,spades)>3 and not sOpener
Gh = hearts(north)>5 and top5(north,hearts)>3 and (dOpener or cOpener)
Gd = diamonds(north)>5 and top5(north,diamonds)>3 and cOpener

goodSuit = (Gs or Gh or Gd) and hcp(north)>16


# Define solid suits
Ss = spades(north)>5 and top4(north,spades)==4 and not sOpener
Sh = hearts(north)>5 and top4(north,hearts)==4 and (dOpener or cOpener)
Sd = diamonds(north)>5 and top4(north,diamonds)==4 and cOpener
solidSuit = (Ss or Sh or Sd) and hcp(north)>16

# Define suit fit
Fs = sOpener and spades(north)>3
Fh = hOpener and hearts(north)>3
Fd = dOpener and diamonds(north)>3
Fc = cOpener and clubs(north)>3
supportedSuit = (Fs or Fh or Fd or Fc)

# Define rebidbidable suits
Rs = spades(north)>4 and top4(north,spades)>2
Rh = hearts(north)>4 and top4(north,hearts)>2
Rd = diamonds(north)>4 and top4(north,diamonds)>2

rebidAndShape = (Rs or Rh or Rd) and shape(north, any 5332 +any 6322) and hcp(north)>18
rebidAndSupport = (Rs or Rh or Rd) and supportedSuit and tp>17

# These are possible Soloway Jump Shifts
# 1C - 2D
# 1C - 2H
# 1C - 2S
# 1D - 2H
# 1D - 2S
# 1H - 2S

# Now do it

# South Opens 1C, 1D, or 1H
hcp(south)>11 and hcp(south)<15 and spades(south)<5

# West passes
and hcp(west)<8
and shape(west, xxxx - any 7xxx +any 6xxx +any 5xxx) 

and controls(north)>3
and
(
# Type 1
   (goodSuit and shape(north, xxxx -any 4xxx))
)
`, "S", true)
Script
Button,1,\n\
--- Soloway Jump Shift - Type 1\n\
1. Strong rebiddable suit w/17+ HCP and 4+ controls and no side 4-card suit\n\
https://www.bridgebase.com/doc/gib_system_notes.php#Soloway_Jump_Shift\n\
%SolowayJumpShiftType1%,width=12% color=blue

Script,Snapdragon
setDealerCode(`

# convention-card:
# auction-filter: Auction.....\\n(1C.1D..[HS])|(1C.1H..[SD])|(1C.1S..[DH])|(1D.1H..[SC])|(1D.1S..[CH])|(1D.2C..[HS])

# Overcalls
dealer east

# Predict East's Opening suit
es = spades(east)
eh = hearts(east)
ed = diamonds(east)
ec = clubs(east)
eS = es>4 and es>=eh and es>=ed and es>=ec
eH = not eS and eh>4 and eh>=ed and eh>=ec
eD = not (eS or eH) and ((ed>3 and ed>=ec) or ec<3)
eC = not (eS or eH or eD)

# Predict South's overcall and north's tolerance
ss = shape(south,6xxx+5xxx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(south,spades)>1   and spades(north)>1
sh = shape(south,x6xx+x5xx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(south,hearts)>1   and hearts(north)>1
sd = shape(south,xx6x+xx5x-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(south,diamonds)>1 and diamonds(north)>1
sc = shape(south,xxx6+xxx5-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(south,clubs)>1    and clubs(north)>1

# Predict West's response
ws = shape(west,6xxx+5xxx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(west,spades)>1
wh = shape(west,x6xx+x5xx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(west,hearts)>1
wd = shape(west,xx6x+xx5x-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(west,diamonds)>1
wc = shape(west,xxx6+xxx5-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(west,clubs)>1

# Predict North's suit  // I think I've discovered a Dealer bug -- ns does not work as a variable name
nss = shape(north,6xxx+5xxx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(north,spades)>1
nh = shape(north,x6xx+x5xx-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(north,hearts)>1
nd = shape(north,xx6x+xx5x-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(north,diamonds)>1
nc = shape(north,xxx6+xxx5-any 7xxx-any 66xx-any 65xx-any 55xx) and top4(north,clubs)>1

CDHS = eC and sd and wh and nss  // 1C - 1D - 1H - 1S
CDSH = eC and sd and ws and nh   // 1C - 1D - 1S - 2H
CHSD = eC and sh and ws and nd   // 1C - 1H - 1S - 2D
CHDS = eC and sh and wd and nss  and hcp(west)>10  // 1C - 1H - 2D - 2S
CSDH = eC and ss and wd and nh   and hcp(west)>10  // 1C - 1S - 2D - 2H
CSHD = eC and ss and wh and nd   and hcp(west)>10  // 1C - 1S - 2H - 3D

DHSC = eD and sh and ws and nc  // 1D - 1H - 1S - 2C
DHCS = eD and sh and wc and nss and hcp(west)>10  // 1D - 1H - 2C - 2S
DSCH = eD and ss and wc and nh  and hcp(west)>10  // 1D - 1S - 2C - 2H
DSHC = eD and ss and wh and nc  and hcp(west)>10  // 1D - 1S - 2H - 3C
DCHS = eD and sc and wh and nss and hcp(south)>10 and hcp(west)>10  // 1D - 2C - 2H - 2S
DCSH = eD and sc and ws and nh  and hcp(south)>10 and hcp(west)>10  // 1D - 2C - 2S - 3H

eOpens = (eC or eD) and hcp(east)>11 and hcp(east)<15 and hcp(south)>8 and hcp(west)>8

Import,https://github.com/ADavidBailey/Practice-Bidding-Scenarios/blob/main/script/Leveling

lCDHS = CDHS and keep47
lCDSH = CDSH and keep47
lCHSD = CHSD and keep47
lCHDS = CHDS and keep
lCSDH = CSDH and keep
lCSHD = CSHD and keep
lDHSC = DHSC and keep47
lDHCS = DHCS and keep
lDSCH = DSCH and keep
lDSHC = DSHC and keep
lDCHS = DCHS and keep
lDCSH = DCSH and keep
levelTheDeal = (lCDHS or lCDSH or lCHSD or lCHDS or lCSDH or lCSHD or lDHSC or lDHCS or lDSCH or lDSHC or lDCHS or lDCSH)

# Now do it
eOpens and (CDHS or CDSH or CHSD or CHDS or CSDH or CSHD or DHSC or DHCS or DSCH or DSHC or DCHS or DCSH)
and levelTheDeal

action
average "CDHS" 100 * CDHS,
average "CDSH" 100 * CDSH,
average "CHSD" 100 * CHSD,
average "CHDS" 100 * CHDS,
average "CSDH" 100 * CSDH,
average "CSHD" 100 * CSHD,
average "DHSC" 100 * DHSC,
average "DHCS" 100 * DHCS,
average "DSCH" 100 * DSCH,
average "DSHC" 100 * DSHC,
average "DCHS" 100 * DCHS,
average "DCSH" 100 * DCSH,


`, "E", true);
Script
Button,Snapdragon Double,\n\
--- Snapdragon Double\n\
After LHO opens，partner overcalls，and RHO bids a new suit，a Snapdragon double\n\
is artifical and forcing.  It shows 5+ cards in the lone unbid suit，at least 8 HCP，\n\
and a tolerance for partner's suit.  'Tolerance' ranges from 2 to 3 cards.\n\
https://www.bridgebum.com/snapdragon_double.php\n\
%Snapdragon%

Script,Notrump
setDealerCode(
`
produce 100
dealer south

# 1 Notrump Opening

# Calculate length points for South (lengthPoints)
lp1 = spades(south)>4 ? spades(south)-4 : 0
lp2 = hearts(south)>4 ? hearts(south)-4 : 0
lp3 = diamonds(south)>4 ? diamonds(south)-4 : 0
lp4 = clubs(south)>4 ? clubs(south)-4 : 0
lengthPoints = lp1 + lp2 + lp3 + lp4

# Calculate doubleton honor NT downgrade(s) for South -- 2 cards, 1 honor, not the Ace
S2H = spades(south)==2 and top4(south,spades)==1 and not hascard(south,AS) ? 1 : 0
H2H = hearts(south)==2 and top4(south,hearts)==1 and not hascard(south,AH) ? 1 : 0
D2H = diamonds(south)==2 and top4(south,diamonds)==1 and not hascard(south,AD) ? 1 : 0
C2H = clubs(south)==2 and top4(south,clubs)==1 and not hascard(south,AC) ? 1 : 0
ntDownGrade = S2H + H2H + D2H + C2H

# Define notrump points for south (ntPoints)
ntPoints = hcp(south) + lengthPoints - ntDownGrade

# Open 1NT -- these include hands that might have rebid problems if opened in a suit
NT = shape(south, 2452+2425+2245+2254+4522 +any 4333+any 4432+any 5332) and ntPoints>14 and ntPoints<18

action
average "HCP         " hcp(south),
average "lengthPoints" lengthPoints,
average "ntDownGrade " ntDownGrade,
average "ntPoints    " ntPoints,

# Level openers strength
c1 = hascard(west,2C)
c3 = hascard(west,3C)
c5 = hascard(west,4C)
c2 = hascard(east,2D)
c4 = hascard(east,3D)
c6 = hascard(east,4D)

reduce98 = c1 and c2 and c3
reduce94 = c1 and c2
reduce87 = c1 and (c2 or c3)
reduce75 = c1
reduce50 = c1 or c2
reduce44 = (c1 or c2) or (c3 and c4)
reduce25 =  c1 or c2 or c3
reduce19 = (c1 or c2 or c3) or (c4 and c5 and c6)
reduce12 = (c1 or c2 or c3) or (c4 and c5)


x = hcp(south)
x13 = x<14  ? 1 : 0
x14 = x==14 ? 1 : 0
x15 = x==15 ? 1 : 0
x16 = x==16 ? 1 : 0
x17 = x==17 ? 1 : 0
x18 = x>17  ? 1 : 0

action

NT

and (not x15 or reduce50 )
and (not x16 or reduce25 )
and (not x14 or reduce12 )


action

average "13" 100 * x13,
average "14" 100 * x14,
average "15" 100 * x15,
average "16" 100 * x16,
average "17" 100 * x17,
average "18" 100 * x18,


`
)
Script
Button,15-17 Notrump Opening,\n\
---  15-17 Notrump Opening\n\
2452+2425+2245+2254+4522 +any 4333，4432，or 5332 distribution.\n\
Those 5422 hands are the ones where you are likely to have to reverse to show your suits.\n\
HCP adjusted +1 for any 5-card suit unless you have KQ，KJ，or QJ doubleton.\n\
%Notrump%


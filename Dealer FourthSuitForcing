Script,FourthSuitForcing
setDealerCode(`

dealer south
produce 1000

# Define Calm Opponents
Import,https://github.com/ADavidBailey/Practice-Bidding-Scenarios/blob/main/-Script-Calm-Opponents

# Predict South's opening bid
Import,https://github.com/ADavidBailey/Practice-Bidding-Scenarios/blob/main/-Script-Predict-Opening-1-Bid


sP = hcp(south)
nP = hcp(north)

# South has 2 suits and will not rebid NT
sTwoSuits = shape(south,any 55xx+any 5440+any 5431+any 4441)

# Exclude NT response
NT = shape(north,4333+4432+5332)

# Predict North's 1-level responding suit
sN = spades(north)
hN = hearts(north)
dN = diamonds(north)
cN = clubs(north)
sS = spades(south)
hS = hearts(south)
dS = diamonds(south)
cS = clubs(south)

# North responds in D, H, or S (not Walsh style)  longer than C to avoid 2/1
nS = sS<3 and sN>3 and sN>hN and sN>dN and sN>cN  and not (NT)
nH = hS<3 and hN>3 and hN>dN and hN>cN            and not (NT or nS)
nD = dS<3 and dN>3 and dN>cN                      and not (NT or nS or nH)

# South opens and North is short in South's suit and responds at the 1-level
oneH = oH and sTwoSuits and hN<3 and (nS)
oneD = oD and sTwoSuits and dN<3 and (nH or nS)
oneC = oC and sTwoSuits and cN<4 and (nD or nH or nS)

# Define North's support or South's opener
nCs = clubs(north)>3
nDs = diamonds(north)>3
nHs = hearts(north)>2

# Define South's possible rebids
sCs = clubs(south)>3
sDs = diamonds(south)>3
sHs = hearts(south)>3
sSs = spades(south)>3

# Defining South's opening, North's response, and South's rebid
CD = oneC and nD and not (sDs or nCs) and (sHs or sSs)
CH = oneC and nH and not (sHs or nCs) and (sSs or (sDs and sP>16))  // D rebid is a reverse
CS = oneC and nS and not (sSs or nCs) and (sDs or sHs) and sP>16    // S or H rebids are reverses
DH = oneD and nH and not (sHs or nDs) and (sSs or sCs)
DS = oneD and nS and not (sSs or nDs) and (sCs or (sHs and sP>16))  // H rebid is a reverse
HS = oneH and nS and not (sSs or nHs) and (sCs or sDs)

(CD or CH or CS or DH or DS or HS) and calmOpps and sP>11 and (nP>12 and nP<18)  // no jump responses


action
#printoneline,

average "CD " 100 * CD,
average "CH " 100 * CH,
average "CS " 100 * CS,
average "DH " 100 * DH,
average "DS " 100 * DS,
average "HS " 100 * HS,
average "TP "       sP + nP,
average "S  "       sP,
average "N  "       nP,

`,"S",true)
Script
Button,4th Suit Forcing,\n\
--- Fourth Suit Forcing\n\
After 1!C，1!D，or 1!H，a suit response at the 1-level，and a new suit by\n\
opener，the 4th suit is artificial and game forcing.\n\
%FourthSuitForcing%
